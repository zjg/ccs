include_rules

LIB_NAME = ipc.a
STATIC_LIBS = $(TUP_CWD)/$(LIB_NAME) $(STATIC_LIBS)

ifeq ($(TUP_CWD),.)

   # can't generate java output, since it writes to a subdir

   : foreach *.proto |> !protoc |> {protoc_out}
   : foreach *.pb.cc | {protoc_out} |> !cc |>
   : foreach *.cxx | {protoc_out} |> !cc |>
   : *.o |> !ar |> $(LIB_NAME)

else

   GENERATED_FILES += $(TUP_CWD)/*.pb.h
   # GENERATED_FILES += $(TUP_CWD)/*.py
   # GENERATED_FILES += $(TUP_CWD)/*.java

endif

